{% extends "base.html" %}
{% block title %}My Appointments - Patient{% endblock %}
{% block content %}
<div class="container-fluid">
    <h1><i class="bi bi-calendar-check"></i> My Appointments</h1>
    <div class="btn-group mb-3"><a href="{{ url_for('patient.appointments', filter='upcoming') }}" class="btn btn-outline-primary {{ 'active' if filter_type == 'upcoming' }}">Upcoming</a>
    <a href="{{ url_for('patient.appointments', filter='past') }}" class="btn btn-outline-primary {{ 'active' if filter_type == 'past' }}">Past</a></div>
    {% if appointments %}
    <div class="row g-3">{% for apt in appointments %}<div class="col-md-6"><div class="card"><div class="card-body">
    <h5>{{ apt.doctor.full_name }}</h5><p class="text-muted">{{ apt.doctor.specialization }}</p><p><strong>Date:</strong> {{ apt.appointment_date|format_date }}</p><p><strong>Time:</strong> {{ apt.appointment_time|format_time }}</p>
    <p><span class="badge bg-{{ 'primary' if apt.status == 'Booked' else 'success' if apt.status == 'Completed' else 'danger' }}">{{ apt.status }}</span></p>
    {% if apt.status == 'Booked' %}<div class="d-flex gap-2"><a href="{{ url_for('patient.reschedule_appointment', appointment_id=apt.id) }}" class="btn btn-sm btn-warning">Reschedule</a>
    <form method="POST" action="{{ url_for('patient.cancel_appointment', appointment_id=apt.id) }}" style="display:inline;"><button class="btn btn-sm btn-danger" onclick="return confirm('Cancel?')">Cancel</button></form></div>{% endif %}
    </div></div></div>{% endfor %}</div>
    {% else %}<div class="alert alert-info">No appointments found.</div>{% endif %}
</div>
{% endblock %}